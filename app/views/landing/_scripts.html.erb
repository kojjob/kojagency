<script>
document.addEventListener('DOMContentLoaded', function() {

  // Simple Smooth Scrolling for Navigation Links
  const navLinks = document.querySelectorAll('.nav-link[href^="#"]');
  navLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const targetId = this.getAttribute('href').substring(1);
      const targetSection = document.getElementById(targetId);
      if (targetSection) {
        targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  });

  // Navigation Background on Scroll
  const nav = document.querySelector('.nav-container');
  if (nav) {
    window.addEventListener('scroll', function() {
      if (window.scrollY > 50) {
        nav.classList.add('scrolled');
      } else {
        nav.classList.remove('scrolled');
      }
    });
  }

  // Mobile Menu Toggle
  const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
  const navMenu = document.querySelector('.nav-links');
  if (mobileMenuBtn && navMenu) {
    mobileMenuBtn.addEventListener('click', function() {
      navMenu.classList.toggle('active');
      const icon = this.querySelector('i');
      if (icon) {
        icon.classList.toggle('fa-bars');
        icon.classList.toggle('fa-times');
      }
    });

    // Close mobile menu when clicking a link
    const mobileNavLinks = navMenu.querySelectorAll('.nav-link');
    mobileNavLinks.forEach(link => {
      link.addEventListener('click', function() {
        navMenu.classList.remove('active');
        const icon = mobileMenuBtn.querySelector('i');
        if (icon) {
          icon.classList.add('fa-bars');
          icon.classList.remove('fa-times');
        }
      });
    });
  }

  // Simple Counter Animation for Stats
  const observerOptions = {
    threshold: 0.5,
    rootMargin: '0px'
  };

  const countUp = (element, target, duration = 2000) => {
    const start = 0;
    const increment = target / (duration / 16);
    let current = start;

    const updateCount = () => {
      current += increment;
      if (current < target) {
        element.textContent = Math.round(current);
        requestAnimationFrame(updateCount);
      } else {
        element.textContent = target;
      }
    };

    updateCount();
  };

  const statsObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const statNumbers = entry.target.querySelectorAll('.stat-number');
        statNumbers.forEach(stat => {
          const target = parseInt(stat.getAttribute('data-count') || stat.textContent);
          if (!stat.classList.contains('counted')) {
            stat.classList.add('counted');
            countUp(stat, target);
          }
        });
      }
    });
  }, observerOptions);

  const statsSection = document.querySelector('.stats-section');
  if (statsSection) {
    statsObserver.observe(statsSection);
  }

  // Portfolio Filter (Simple)
  const filterButtons = document.querySelectorAll('.filter-btn');
  const portfolioItems = document.querySelectorAll('.portfolio-item');

  if (filterButtons.length > 0) {
    filterButtons.forEach(btn => {
      btn.addEventListener('click', function() {
        // Update active button
        filterButtons.forEach(b => b.classList.remove('active'));
        this.classList.add('active');

        const filter = this.getAttribute('data-filter');

        portfolioItems.forEach(item => {
          if (filter === 'all' || item.getAttribute('data-category') === filter) {
            item.style.display = 'block';
            setTimeout(() => {
              item.style.opacity = '1';
              item.style.transform = 'scale(1)';
            }, 10);
          } else {
            item.style.opacity = '0';
            item.style.transform = 'scale(0.9)';
            setTimeout(() => {
              item.style.display = 'none';
            }, 300);
          }
        });
      });
    });
  }

  // Simple Testimonial Carousel
  let currentTestimonial = 0;
  const testimonialWrapper = document.querySelector('.testimonial-wrapper');
  const testimonialItems = document.querySelectorAll('.testimonial-item');
  const dots = document.querySelectorAll('.dot');

  function showTestimonial(index) {
    if (testimonialWrapper && testimonialItems.length > 0) {
      testimonialWrapper.style.transform = `translateX(-${index * 100}%)`;

      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === index);
      });
    }
  }

  if (dots.length > 0) {
    dots.forEach((dot, index) => {
      dot.addEventListener('click', () => {
        currentTestimonial = index;
        showTestimonial(currentTestimonial);
      });
    });

    // Auto-advance testimonials (optional, subtle)
    setInterval(() => {
      currentTestimonial = (currentTestimonial + 1) % testimonialItems.length;
      showTestimonial(currentTestimonial);
    }, 5000);
  }

  // Simple Form Validation
  const contactForm = document.getElementById('contact-form');
  if (contactForm) {
    contactForm.addEventListener('submit', function(e) {
      e.preventDefault();

      const name = this.querySelector('[name="name"]');
      const email = this.querySelector('[name="email"]');
      const message = this.querySelector('[name="message"]');

      let isValid = true;

      // Reset errors
      [name, email, message].forEach(field => {
        if (field) field.classList.remove('error');
      });

      // Validate
      if (name && !name.value.trim()) {
        name.classList.add('error');
        isValid = false;
      }

      if (email && !email.value.includes('@')) {
        email.classList.add('error');
        isValid = false;
      }

      if (message && !message.value.trim()) {
        message.classList.add('error');
        isValid = false;
      }

      if (isValid) {
        // Show success message
        const successMsg = document.createElement('div');
        successMsg.className = 'form-success';
        successMsg.textContent = 'Thank you! We\'ll get back to you soon.';
        successMsg.style.cssText = `
          background: var(--success);
          color: white;
          padding: 1rem;
          border-radius: var(--radius);
          margin-top: 1rem;
          text-align: center;
        `;

        this.appendChild(successMsg);

        // Reset form
        this.reset();

        // Remove success message after 5 seconds
        setTimeout(() => {
          successMsg.remove();
        }, 5000);
      }
    });
  }

  // Simple Fade In Animation on Scroll
  const fadeElements = document.querySelectorAll('.fade-in-up, .fade-in');

  const fadeObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.animationPlayState = 'running';
        fadeObserver.unobserve(entry.target);
      }
    });
  }, {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  });

  fadeElements.forEach(element => {
    element.style.animationPlayState = 'paused';
    fadeObserver.observe(element);
  });

  // Add subtle hover effect to cards
  const cards = document.querySelectorAll('.service-card, .portfolio-item');
  cards.forEach(card => {
    card.addEventListener('mouseenter', function() {
      this.style.transition = 'transform 0.3s ease, box-shadow 0.3s ease';
    });
  });

});

// Add CSS for error state
const style = document.createElement('style');
style.textContent = `
  .form-input.error,
  .form-textarea.error {
    border-color: #ef4444;
  }

  .form-input.error:focus,
  .form-textarea.error:focus {
    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
  }
`;
document.head.appendChild(style);
</script>